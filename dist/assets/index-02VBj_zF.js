import{c as q,i as J,V as Q,f as j,h as a,a2 as D,ae as Y,aK as Z,P as ee,Q as te,m as R,U as ae,aL as ie,aM as ne,aN as le,a0 as G,_ as K,n as F,ai as se,q as N,o as oe,y,al as M,z as l,x as i,am as V,A as d,az as z,v as T,an as m,ao as re,L as ce,aO as de,H as me,av as ue,aw as pe}from"./index-TwhPk9NU.js";import{S as _e}from"./index-OZCZkAdY.js";import{_ as ge}from"./index-umg4-B7O.js";import{b as ve,_ as he,a as fe}from"./index-ekTrYd8M.js";import{_ as Se}from"./index-71xrWT-N.js";import"./index-EbxQddqb.js";import"./Checkbox-m_Qp4csq.js";import"./index-jRt2O7V0.js";import"./index-CgjrgbsS.js";const $e=()=>({prefixCls:String,color:String,dot:D.any,pending:Y(),position:D.oneOf(Z("left","right","")).def(""),label:D.any}),P=q({compatConfig:{MODE:3},name:"ATimelineItem",props:J($e(),{color:"blue",pending:!1}),slots:Object,setup(e,t){let{slots:s}=t;const{prefixCls:p}=Q("timeline",e),o=j(()=>({[`${p.value}-item`]:!0,[`${p.value}-item-pending`]:e.pending})),S=j(()=>/blue|red|green|gray/.test(e.color||"")?void 0:e.color||"blue"),b=j(()=>({[`${p.value}-item-head`]:!0,[`${p.value}-item-head-${e.color||"blue"}`]:!S.value}));return()=>{var c,I,f;const{label:$=(c=s.label)===null||c===void 0?void 0:c.call(s),dot:h=(I=s.dot)===null||I===void 0?void 0:I.call(s)}=e;return a("li",{class:o.value},[$&&a("div",{class:`${p.value}-item-label`},[$]),a("div",{class:`${p.value}-item-tail`},null),a("div",{class:[b.value,!!h&&`${p.value}-item-head-custom`],style:{borderColor:S.value,color:S.value}},[h]),a("div",{class:`${p.value}-item-content`},[(f=s.default)===null||f===void 0?void 0:f.call(s)])])}}}),ye=e=>{const{componentCls:t}=e;return{[t]:R(R({},ae(e)),{margin:0,padding:0,listStyle:"none",[`${t}-item`]:{position:"relative",margin:0,paddingBottom:e.timeLineItemPaddingBottom,fontSize:e.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:e.timeLineItemHeadSize,insetInlineStart:(e.timeLineItemHeadSize-e.timeLineItemTailWidth)/2,height:`calc(100% - ${e.timeLineItemHeadSize}px)`,borderInlineStart:`${e.timeLineItemTailWidth}px ${e.lineType} ${e.colorSplit}`},"&-pending":{[`${t}-item-head`]:{fontSize:e.fontSizeSM,backgroundColor:"transparent"},[`${t}-item-tail`]:{display:"none"}},"&-head":{position:"absolute",width:e.timeLineItemHeadSize,height:e.timeLineItemHeadSize,backgroundColor:e.colorBgContainer,border:`${e.timeLineHeadBorderWidth}px ${e.lineType} transparent`,borderRadius:"50%","&-blue":{color:e.colorPrimary,borderColor:e.colorPrimary},"&-red":{color:e.colorError,borderColor:e.colorError},"&-green":{color:e.colorSuccess,borderColor:e.colorSuccess},"&-gray":{color:e.colorTextDisabled,borderColor:e.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:e.timeLineItemHeadSize/2,insetInlineStart:e.timeLineItemHeadSize/2,width:"auto",height:"auto",marginBlockStart:0,paddingBlock:e.timeLineItemCustomHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:-(e.fontSize*e.lineHeight-e.fontSize)+e.lineWidth,marginInlineStart:e.margin+e.timeLineItemHeadSize,marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{[`> ${t}-item-tail`]:{display:"none"},[`> ${t}-item-content`]:{minHeight:e.controlHeightLG*1.2}}},[`&${t}-alternate,
        &${t}-right,
        &${t}-label`]:{[`${t}-item`]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:`-${e.marginXXS}px`,"&-custom":{marginInlineStart:e.timeLineItemTailWidth/2}},"&-left":{[`${t}-item-content`]:{insetInlineStart:`calc(50% - ${e.marginXXS}px)`,width:`calc(50% - ${e.marginSM}px)`,textAlign:"start"}},"&-right":{[`${t}-item-content`]:{width:`calc(50% - ${e.marginSM}px)`,margin:0,textAlign:"end"}}}},[`&${t}-right`]:{[`${t}-item-right`]:{[`${t}-item-tail,
            ${t}-item-head,
            ${t}-item-head-custom`]:{insetInlineStart:`calc(100% - ${(e.timeLineItemHeadSize+e.timeLineItemTailWidth)/2}px)`},[`${t}-item-content`]:{width:`calc(100% - ${e.timeLineItemHeadSize+e.marginXS}px)`}}},[`&${t}-pending
        ${t}-item-last
        ${t}-item-tail`]:{display:"block",height:`calc(100% - ${e.margin}px)`,borderInlineStart:`${e.timeLineItemTailWidth}px dotted ${e.colorSplit}`},[`&${t}-reverse
        ${t}-item-last
        ${t}-item-tail`]:{display:"none"},[`&${t}-reverse ${t}-item-pending`]:{[`${t}-item-tail`]:{insetBlockStart:e.margin,display:"block",height:`calc(100% - ${e.margin}px)`,borderInlineStart:`${e.timeLineItemTailWidth}px dotted ${e.colorSplit}`},[`${t}-item-content`]:{minHeight:e.controlHeightLG*1.2}},[`&${t}-label`]:{[`${t}-item-label`]:{position:"absolute",insetBlockStart:-(e.fontSize*e.lineHeight-e.fontSize)+e.timeLineItemTailWidth,width:`calc(50% - ${e.marginSM}px)`,textAlign:"end"},[`${t}-item-right`]:{[`${t}-item-label`]:{insetInlineStart:`calc(50% + ${e.marginSM}px)`,width:`calc(50% - ${e.marginSM}px)`,textAlign:"start"}}},"&-rtl":{direction:"rtl",[`${t}-item-head-custom`]:{transform:"translate(50%, -50%)"}}})}},xe=ee("Timeline",e=>{const t=te(e,{timeLineItemPaddingBottom:e.padding*1.25,timeLineItemHeadSize:10,timeLineItemCustomHeadPaddingVertical:e.paddingXXS,timeLinePaddingInlineEnd:2,timeLineItemTailWidth:e.lineWidthBold,timeLineHeadBorderWidth:e.wireframe?e.lineWidthBold:e.lineWidth*3});return[ye(t)]}),Ie=()=>({prefixCls:String,pending:D.any,pendingDot:D.any,reverse:Y(),mode:D.oneOf(Z("left","alternate","right",""))}),A=q({compatConfig:{MODE:3},name:"ATimeline",inheritAttrs:!1,props:J(Ie(),{reverse:!1,mode:""}),slots:Object,setup(e,t){let{slots:s,attrs:p}=t;const{prefixCls:o,direction:S}=Q("timeline",e),[b,c]=xe(o),I=(f,$)=>{const h=f.props||{};return e.mode==="alternate"?h.position==="right"?`${o.value}-item-right`:h.position==="left"?`${o.value}-item-left`:$%2===0?`${o.value}-item-left`:`${o.value}-item-right`:e.mode==="left"?`${o.value}-item-left`:e.mode==="right"?`${o.value}-item-right`:h.position==="right"?`${o.value}-item-right`:""};return()=>{var f,$,h;const{pending:n=(f=s.pending)===null||f===void 0?void 0:f.call(s),pendingDot:g=($=s.pendingDot)===null||$===void 0?void 0:$.call(s),reverse:x,mode:C}=e,L=typeof n=="boolean"?null:n,H=ie((h=s.default)===null||h===void 0?void 0:h.call(s)),W=n?a(P,{pending:!!n,dot:g||a(ne,null,null)},{default:()=>[L]}):null;W&&H.push(W);const _=x?H.reverse():H,B=_.length,O=`${o.value}-item-last`,X=_.map((u,r)=>{const w=r===B-2?O:"",k=r===B-1?O:"";return le(u,{class:G([!x&&n?w:k,I(u,r)])})}),E=_.some(u=>{var r,w;return!!(!((r=u.props)===null||r===void 0)&&r.label||!((w=u.children)===null||w===void 0)&&w.label)}),U=G(o.value,{[`${o.value}-pending`]:!!n,[`${o.value}-reverse`]:!!x,[`${o.value}-${C}`]:!!C&&!E,[`${o.value}-label`]:E,[`${o.value}-rtl`]:S.value==="rtl"},p.class,c.value);return b(a("ul",K(K({},p),{},{class:U}),[X]))}}});A.Item=P;A.install=function(e){return e.component(A.name,A),e.component(P.name,P),e};function be(){return F({url:"/user/process/instance/1/100",method:"get"})}function Ce(e){return F({url:`/user/process/instance/${e}`,method:"get"})}function Le(e){return F({url:`/user/process/instance/tasks/detail/${e}`,method:"get"})}const v=e=>(ue("data-v-a4fd2335"),e=e(),pe(),e),we={class:"bg-white p-2 flex"},Te={class:"bg-white p-2 mt-4"},De={class:"flex"},He={class:"left pr-6"},Be=v(()=>l("h1",{class:"text-base"},"申请人信息",-1)),Ne=v(()=>l("span",{class:"text-gray-500",style:{"padding-left":"27px"}},"姓名：",-1)),ze=v(()=>l("span",{class:"text-gray-500"},"部门：",-1)),Ae=v(()=>l("span",{class:"text-gray-500"},"入职时间：",-1)),Pe=v(()=>l("h1",{class:"text-base"},"请假申请",-1)),We=v(()=>l("span",{class:"text-gray-500"},"审批类型：",-1)),Oe=v(()=>l("span",{class:"text-gray-500"},"开始时间：",-1)),Ee=v(()=>l("span",{class:"text-gray-500"},"休假类别：",-1)),Me=v(()=>l("span",{class:"text-gray-500"},"结束时间：",-1)),Ve=v(()=>l("span",{class:"text-gray-500"},"请假时长：",-1)),Xe=v(()=>l("span",{class:"text-gray-500"},"申请单位：",-1)),Ue=v(()=>l("span",{class:"text-gray-500"},"申请事由：",-1)),je=v(()=>l("span",{class:"text-gray-500"},"审批状态：",-1)),Fe={class:"right"},Re={class:"text-base"},Ge={class:"text-xs text-gray-500"},Ke={__name:"index",setup(e){const t=[{name:"ID",dataIndex:"processId",key:"processId",width:60},{title:"审批类型",dataIndex:"processName",key:"processName",filters:[{text:"请假",value:"请假"},{text:"加班",value:"加班"},{text:"离职",value:"离职"}],onFilter:(n,g)=>g.processName.indexOf(n)===0},{title:"申请人",dataIndex:"username",key:"username"},{title:"当前审批人",dataIndex:"procCurrNodeUserName",key:"procCurrNodeUserName"},{title:"审批时间",dataIndex:"procApplyTime",key:"procApplyTime"},{title:"审批状态",dataIndex:"processState",key:"processState",filters:[{text:"已提交",value:"0"},{text:"审批中",value:"1"},{text:"审批通过",value:"2"},{text:"审批驳回",value:"3"},{text:"撤销",value:"4"}],onFilter:(n,g)=>g.processState==n},{title:"操作",key:"action"}],s=N([]),p=N(!1);oe(()=>{o()});const o=async()=>{p.value=!0;const n=await be();s.value=n,p.value=!1},S=n=>{switch(n){case 0:return"已提交";case 1:return"审批中";case 2:return"审批通过";case 3:return"审批驳回";case 4:return"撤销";default:return"未知"}},b=N(!1),c=N({}),I=N([]),f=async n=>{const g=await Ce(n.processId);let x={...g,procData:JSON.parse(g.procData)};c.value=x},$=async n=>{const g=await Le(n.processId);I.value=g},h=async n=>{await f(n),await $(n),b.value=!0};return(n,g)=>{const x=_e,C=ce,L=de,H=me,W=ge,_=ve,B=he,O=fe,X=P,E=A,U=Se;return y(),M(V,null,[l("div",we,[a(C,{hoverable:"",style:{width:"180px"},class:"mr-4"},{default:i(()=>[a(x,{title:"当前审批中",value:s.value.currApproveCount},null,8,["value"])]),_:1}),a(C,{hoverable:"",style:{width:"180px"},class:"mr-4"},{default:i(()=>[a(x,{title:"本月审批通过",value:s.value.approveCount},null,8,["value"])]),_:1}),a(C,{hoverable:"",style:{width:"180px"}},{default:i(()=>[a(x,{title:"本月审批驳回",value:s.value.rejectionCount},null,8,["value"])]),_:1})]),l("div",Te,[a(W,{columns:t,rowKey:"id","data-source":s.value.rows,pagination:!1,loading:p.value},{headerCell:i(({column:u})=>[u.key==="processId"?(y(),M(V,{key:0},[d(" ID ")],64)):z("",!0)]),bodyCell:i(({column:u,record:r})=>[u.key==="processState"?(y(),M(V,{key:0},[r.processState==0?(y(),T(L,{key:0,color:"yellow"},{default:i(()=>[d(m(S(r.processState)),1)]),_:2},1024)):z("",!0),r.processState==1?(y(),T(L,{key:1,color:"purple"},{default:i(()=>[d(m(S(r.processState)),1)]),_:2},1024)):r.processState==2?(y(),T(L,{key:2,color:"green"},{default:i(()=>[d(m(S(r.processState)),1)]),_:2},1024)):r.processState==3||r.processState==4?(y(),T(L,{key:3,color:"red"},{default:i(()=>[d(m(S(r.processState)),1)]),_:2},1024)):z("",!0)],64)):z("",!0),u.key==="action"?(y(),T(H,{key:1,type:"link",onClick:w=>h(r)},{default:i(()=>[d("详情")]),_:2},1032,["onClick"])):z("",!0)]),_:1},8,["data-source","loading"])]),a(U,{open:b.value,"onUpdate:open":g[0]||(g[0]=u=>b.value=u),title:"审批详情",placement:"right",width:"75%"},{default:i(()=>[l("div",De,[l("div",He,[Be,a(B,{class:"my-6"},{default:i(()=>[a(_,{span:12},{default:i(()=>[Ne,d(" "+m(c.value.username),1)]),_:1}),a(_,{span:12},{default:i(()=>[ze,d(" "+m(c.value.departmentName),1)]),_:1}),a(_,{span:12,class:"mt-4"},{default:i(()=>[Ae,d(" "+m(c.value.timeOfEntry),1)]),_:1})]),_:1}),a(O),Pe,a(B,{class:"my-6"},{default:i(()=>[a(_,{span:12},{default:i(()=>[We,d(" "+m(c.value.processName),1)]),_:1}),a(_,{span:12},{default:i(()=>[Oe,d(" "+m(c.value.procData.startTime||"-"),1)]),_:1}),a(_,{span:12,class:"mt-4"},{default:i(()=>[Ee,d(" "+m(c.value.procData.processName||"-"),1)]),_:1}),a(_,{span:12,class:"mt-4"},{default:i(()=>[Me,d(" "+m(c.value.procData.endTime||"-"),1)]),_:1}),a(_,{span:12,class:"mt-4"},{default:i(()=>[Ve,d(" "+m(c.value.procData.duration||"-"),1)]),_:1}),a(_,{span:12,class:"mt-4"},{default:i(()=>[Xe,d(" "+m(c.value.procData.applyUnit||"-"),1)]),_:1}),a(_,{span:12,class:"mt-4"},{default:i(()=>[Ue,d(" "+m(c.value.procData.reason||"-"),1)]),_:1}),a(_,{span:12,class:"mt-4"},{default:i(()=>[je,d(" 审批通过 ")]),_:1})]),_:1})]),l("div",Fe,[a(E,null,{default:i(()=>[(y(!0),M(V,null,re(I.value,u=>(y(),T(X,null,{default:i(()=>[l("div",Re,m(u.handleUserName)+" - "+m(u.handleOpinion),1),l("p",Ge,m(u.handleTime),1)]),_:2},1024))),256))]),_:1})])])]),_:1},8,["open"])],64)}}},it=se(Ke,[["__scopeId","data-v-a4fd2335"]]);export{it as default};
