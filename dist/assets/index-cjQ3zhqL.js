import{h as m,P as k,Q as M,m as p,U as O,c as N,i as R,V as P,_ as y,aP as U,j as _,ag as A,aQ as B,af as C,ae as V,q as D,o as L,aR as Q,g as X,aS as q}from"./index-na3ZdG7K.js";const z=t=>{const{value:n,formatter:e,precision:o,decimalSeparator:s,groupSeparator:u="",prefixCls:c}=t;let r;if(typeof e=="function")r=e({value:n});else{const i=String(n),f=i.match(/^(-?)(\d*)(\.(\d+))?$/);if(!f)r=i;else{const d=f[1];let a=f[2]||"0",l=f[4]||"";a=a.replace(/\B(?=(\d{3})+(?!\d))/g,u),typeof o=="number"&&(l=l.padEnd(o,"0").slice(0,o>0?o:0)),l&&(l=`${s}${l}`),r=[m("span",{key:"int",class:`${c}-content-value-int`},[d,a]),l&&m("span",{key:"decimal",class:`${c}-content-value-decimal`},[l])]}}return m("span",{class:`${c}-content-value`},[r])};z.displayName="StatisticNumber";const Y=z,G=t=>{const{componentCls:n,marginXXS:e,padding:o,colorTextDescription:s,statisticTitleFontSize:u,colorTextHeading:c,statisticContentFontSize:r,statisticFontFamily:i}=t;return{[`${n}`]:p(p({},O(t)),{[`${n}-title`]:{marginBottom:e,color:s,fontSize:u},[`${n}-skeleton`]:{paddingTop:o},[`${n}-content`]:{color:c,fontSize:r,fontFamily:i,[`${n}-content-value`]:{display:"inline-block",direction:"ltr"},[`${n}-content-prefix, ${n}-content-suffix`]:{display:"inline-block"},[`${n}-content-prefix`]:{marginInlineEnd:e},[`${n}-content-suffix`]:{marginInlineStart:e}}})}},J=k("Statistic",t=>{const{fontSizeHeading3:n,fontSize:e,fontFamily:o}=t,s=M(t,{statisticTitleFontSize:e,statisticContentFontSize:n,statisticFontFamily:o});return[G(s)]}),E=()=>({prefixCls:String,decimalSeparator:String,groupSeparator:String,format:String,value:_([Number,String,Object]),valueStyle:{type:Object,default:void 0},valueRender:A(),formatter:B(),precision:Number,prefix:C(),suffix:C(),title:C(),loading:V()}),v=N({compatConfig:{MODE:3},name:"AStatistic",inheritAttrs:!1,props:R(E(),{decimalSeparator:".",groupSeparator:",",loading:!1}),slots:Object,setup(t,n){let{slots:e,attrs:o}=n;const{prefixCls:s,direction:u}=P("statistic",t),[c,r]=J(s);return()=>{var i,f,d,a,l,g,S;const{value:H=0,valueStyle:I,valueRender:w}=t,x=s.value,h=(i=t.title)!==null&&i!==void 0?i:(f=e.title)===null||f===void 0?void 0:f.call(e),b=(d=t.prefix)!==null&&d!==void 0?d:(a=e.prefix)===null||a===void 0?void 0:a.call(e),F=(l=t.suffix)!==null&&l!==void 0?l:(g=e.suffix)===null||g===void 0?void 0:g.call(e),j=(S=t.formatter)!==null&&S!==void 0?S:e.formatter;let $=m(Y,y({"data-for-update":Date.now()},p(p({},t),{prefixCls:x,value:H,formatter:j})),null);return w&&($=w($)),c(m("div",y(y({},o),{},{class:[x,{[`${x}-rtl`]:u.value==="rtl"},o.class,r.value]}),[h&&m("div",{class:`${x}-title`},[h]),m(U,{paragraph:!1,loading:t.loading},{default:()=>[m("div",{style:I,class:`${x}-content`},[b&&m("span",{class:`${x}-content-prefix`},[b]),$,F&&m("span",{class:`${x}-content-suffix`},[F])])]})]))}}}),K=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function W(t,n){let e=t;const o=/\[[^\]]*]/g,s=(n.match(o)||[]).map(i=>i.slice(1,-1)),u=n.replace(o,"[]"),c=K.reduce((i,f)=>{let[d,a]=f;if(i.includes(d)){const l=Math.floor(e/a);return e-=l*a,i.replace(new RegExp(`${d}+`,"g"),g=>{const S=g.length;return l.toString().padStart(S,"0")})}return i},u);let r=0;return c.replace(o,()=>{const i=s[r];return r+=1,i})}function Z(t,n){const{format:e=""}=n,o=new Date(t).getTime(),s=Date.now(),u=Math.max(o-s,0);return W(u,e)}const tt=1e3/30;function T(t){return new Date(t).getTime()}const et=()=>p(p({},E()),{value:_([Number,String,Object]),format:String,onFinish:Function,onChange:Function}),nt=N({compatConfig:{MODE:3},name:"AStatisticCountdown",props:R(et(),{format:"HH:mm:ss"}),setup(t,n){let{emit:e,slots:o}=n;const s=D(),u=D(),c=()=>{const{value:a}=t;T(a)>=Date.now()?r():i()},r=()=>{if(s.value)return;const a=T(t.value);s.value=setInterval(()=>{u.value.$forceUpdate(),a>Date.now()&&e("change",a-Date.now()),c()},tt)},i=()=>{const{value:a}=t;s.value&&(clearInterval(s.value),s.value=void 0,T(a)<Date.now()&&e("finish"))},f=a=>{let{value:l,config:g}=a;const{format:S}=t;return Z(l,p(p({},g),{format:S}))},d=a=>a;return L(()=>{c()}),Q(()=>{c()}),X(()=>{i()}),()=>{const a=t.value;return m(v,y({ref:u},p(p({},q(t,["onFinish","onChange"])),{value:a,valueRender:d,formatter:f})),o)}}});v.Countdown=nt;v.install=function(t){return t.component(v.name,v),t.component(v.Countdown.name,v.Countdown),t};v.Countdown;export{v as S};
