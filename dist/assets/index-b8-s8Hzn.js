import{u as ue,w as le,t as ce,a as de,d as fe,b as ve,c as me,i as ge,e as pe,s as E,f as _,o as _e,g as he,h as u,_ as te,j as be,k as we,l as oe,m as ne,n as H,p as ye,r as ke,q as ae,v as xe,x as c,y as Se,z as B,A as z,B as A,C as Ae,D as $e,E as Ie,I as ze,F as Oe,G as Ce,H as Re,J as Ne,K as Pe,L as Te}from"./index-3Kg_Lg70.js";import{C as We}from"./index-9OS597c_.js";import"./Checkbox-y_fHDD_x.js";function Be(o){return o.replace(/([A-Z])/g,"-$1").toLowerCase()}function Fe(o){return Object.keys(o).map(n=>`${Be(n)}: ${o[n]};`).join(" ")}function re(){return window.devicePixelRatio||1}function D(o,n,l,s){o.translate(n,l),o.rotate(Math.PI/180*Number(s)),o.translate(-n,-l)}const Ue=(o,n)=>{let l=!1;return o.removedNodes.length&&(l=Array.from(o.removedNodes).some(s=>s===n)),o.type==="attributes"&&o.target===n&&(l=!0),l};var je=function(o,n){var l={};for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&n.indexOf(s)<0&&(l[s]=o[s]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,s=Object.getOwnPropertySymbols(o);d<s.length;d++)n.indexOf(s[d])<0&&Object.prototype.propertyIsEnumerable.call(o,s[d])&&(l[s[d]]=o[s[d]]);return l};function Le(o,n){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{window:s=fe}=l,d=je(l,["window"]);let f;const v=ue(()=>s&&"MutationObserver"in s),S=()=>{f&&(f.disconnect(),f=void 0)},h=le(()=>de(o),a=>{S(),v.value&&s&&a&&(f=new MutationObserver(n),f.observe(a,d))},{immediate:!0}),i=()=>{S(),h()};return ce(i),{isSupported:v,stop:i}}const G=2,se=3,Me=()=>({zIndex:Number,rotate:Number,width:Number,height:Number,image:String,content:be([String,Array]),font:we(),rootClassName:String,gap:oe(),offset:oe()}),qe=me({name:"AWatermark",inheritAttrs:!1,props:ge(Me(),{zIndex:9,rotate:-22,font:{},gap:[100,100]}),setup(o,n){let{slots:l,attrs:s}=n;const[,d]=pe(),f=E(),v=E(),S=E(!1),h=_(()=>{var e,t;return(t=(e=o.gap)===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:100}),i=_(()=>{var e,t;return(t=(e=o.gap)===null||e===void 0?void 0:e[1])!==null&&t!==void 0?t:100}),a=_(()=>h.value/2),w=_(()=>i.value/2),R=_(()=>{var e,t;return(t=(e=o.offset)===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:a.value}),O=_(()=>{var e,t;return(t=(e=o.offset)===null||e===void 0?void 0:e[1])!==null&&t!==void 0?t:w.value}),N=_(()=>{var e,t;return(t=(e=o.font)===null||e===void 0?void 0:e.fontSize)!==null&&t!==void 0?t:d.value.fontSizeLG}),U=_(()=>{var e,t;return(t=(e=o.font)===null||e===void 0?void 0:e.fontWeight)!==null&&t!==void 0?t:"normal"}),$=_(()=>{var e,t;return(t=(e=o.font)===null||e===void 0?void 0:e.fontStyle)!==null&&t!==void 0?t:"normal"}),F=_(()=>{var e,t;return(t=(e=o.font)===null||e===void 0?void 0:e.fontFamily)!==null&&t!==void 0?t:"sans-serif"}),j=_(()=>{var e,t;return(t=(e=o.font)===null||e===void 0?void 0:e.color)!==null&&t!==void 0?t:d.value.colorFill}),L=_(()=>{var e;const t={zIndex:(e=o.zIndex)!==null&&e!==void 0?e:9,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let r=R.value-a.value,g=O.value-w.value;return r>0&&(t.left=`${r}px`,t.width=`calc(100% - ${r}px)`,r=0),g>0&&(t.top=`${g}px`,t.height=`calc(100% - ${g}px)`,g=0),t.backgroundPosition=`${r}px ${g}px`,t}),b=()=>{v.value&&(v.value.remove(),v.value=void 0)},X=(e,t)=>{var r;f.value&&v.value&&(S.value=!0,v.value.setAttribute("style",Fe(ne(ne({},L.value),{backgroundImage:`url('${e}')`,backgroundSize:`${(h.value+t)*G}px`}))),(r=f.value)===null||r===void 0||r.append(v.value),setTimeout(()=>{S.value=!1}))},ie=e=>{let t=120,r=64;const g=o.content,I=o.image,m=o.width,p=o.height;if(!I&&e.measureText){e.font=`${Number(N.value)}px ${F.value}`;const y=Array.isArray(g)?g:[g],k=y.map(x=>e.measureText(x).width);t=Math.ceil(Math.max(...k)),r=Number(N.value)*y.length+(y.length-1)*se}return[m??t,p??r]},Y=(e,t,r,g,I)=>{const m=re(),p=o.content,y=Number(N.value)*m;e.font=`${$.value} normal ${U.value} ${y}px/${I}px ${F.value}`,e.fillStyle=j.value,e.textAlign="center",e.textBaseline="top",e.translate(g/2,0);const k=Array.isArray(p)?p:[p];k==null||k.forEach((x,P)=>{e.fillText(x??"",t,r+P*(y+se*m))})},M=()=>{var e;const t=document.createElement("canvas"),r=t.getContext("2d"),g=o.image,I=(e=o.rotate)!==null&&e!==void 0?e:-22;if(r){v.value||(v.value=document.createElement("div"));const m=re(),[p,y]=ie(r),k=(h.value+p)*m,x=(i.value+y)*m;t.setAttribute("width",`${k*G}px`),t.setAttribute("height",`${x*G}px`);const P=h.value*m/2,q=i.value*m/2,T=p*m,W=y*m,K=(T+h.value*m)/2,V=(W+i.value*m)/2,J=P+k,Z=q+x,Q=K+k,ee=V+x;if(r.save(),D(r,K,V,I),g){const C=new Image;C.onload=()=>{r.drawImage(C,P,q,T,W),r.restore(),D(r,Q,ee,I),r.drawImage(C,J,Z,T,W),X(t.toDataURL(),p)},C.crossOrigin="anonymous",C.referrerPolicy="no-referrer",C.src=g}else Y(r,P,q,T,W),r.restore(),D(r,Q,ee,I),Y(r,J,Z,T,W),X(t.toDataURL(),p)}};return _e(()=>{M()}),le(()=>[o,d.value.colorFill,d.value.fontSizeLG],()=>{M()},{deep:!0,flush:"post"}),he(()=>{b()}),Le(f,e=>{S.value||e.forEach(t=>{Ue(t,v.value)&&(b(),M())})},{attributes:!0,subtree:!0,childList:!0,attributeFilter:["style","class"]}),()=>{var e;return u("div",te(te({},s),{},{ref:f,class:[s.class,o.rootClassName],style:[{position:"relative"},s.style]}),[(e=l.default)===null||e===void 0?void 0:e.call(l)])}}}),Ee=ve(qe);function De(o){return H({url:"/sys/login",method:"post",data:o})}function Ge(){return H({url:"/sys/profile",method:"get"})}function He(o){return H({url:`/sys/user/${o}`,method:"get"})}const Xe={class:"login-container"},Ye={class:"form"},Ke=B("h3",{class:"hrsass"},"HRSASS",-1),Ve={class:"flex items-center"},Je={class:"popover flex flex-col"},ot={__name:"index",setup(o){ye();const n=ke({mobile:"",password:"",isAgree:!0}),l=ae(null),d={mobile:[{required:!0,message:"手机号不能为空",trigger:["change","blur"]},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:["change","blur"]}],password:[{required:!0,message:"密码不能为空",trigger:["change","blur"]},{pattern:/^.{6,}$/,message:"密码长度必须大于6位",trigger:["change","blur"]}],isAgree:[{validator:(i,a)=>a?Promise.resolve():Promise.reject(new Error("您必须同意用户协议"))}]};let f=ae(!1);const v=async i=>{try{f.value=!0;const{updateToken:a}=$e(),w=await De(i);a(w),await S(),f.value=!1,location.reload()}catch(a){console.log(a,"error"),f.value=!1}},S=async()=>{const i=await Ge(),a=await He(i.userId),{updateUserInfo:w,addAuthorizedRoutes:R}=Ie();a.profile=i,w({...a,roles:i.roles}),R()},h=i=>{switch(i){case"a":n.mobile="13800000002",n.password="hm#qd@23!";break;case"b":n.mobile="18210090582",n.password="hm#qd@23!";break;case"c":n.mobile="18210090789",n.password="hm#qd@23!";break;default:n.mobile="13800000002",n.password="hm#qd@23!";break}l.value.validate()};return(i,a)=>{const w=Ee,R=ze,O=Oe,N=Ce,U=We,$=Re,F=Ne,j=Pe,L=Te;return Se(),xe(w,{content:"qiaofugui.cn",font:{fontSize:14}},{default:c(()=>[B("div",Xe,[u(w,{class:"logo text-gray-500",content:"BackGround",gap:[210,210]},{default:c(()=>[z(" BackGround ")]),_:1}),B("div",Ye,[Ke,u(L,{class:"login-card"},{default:c(()=>[u(j,{ref_key:"formRef",ref:l,model:A(n),rules:d,onFinish:v,autocomplete:"off"},{default:c(()=>[u(O,{name:"mobile","has-feedback":""},{default:c(()=>[u(R,{size:"large",value:A(n).mobile,"onUpdate:value":a[0]||(a[0]=b=>A(n).mobile=b)},null,8,["value"])]),_:1}),u(O,{name:"password","has-feedback":""},{default:c(()=>[u(N,{size:"large",value:A(n).password,"onUpdate:value":a[1]||(a[1]=b=>A(n).password=b),onKeyup:Ae(v,["enter"])},null,8,["value"])]),_:1}),u(O,{name:"isAgree"},{default:c(()=>[B("div",Ve,[u(U,{checked:A(n).isAgree,"onUpdate:checked":a[2]||(a[2]=b=>A(n).isAgree=b)},{default:c(()=>[z("用户平台使用协议")]),_:1},8,["checked"]),u(F,{trigger:"hover",placement:"top"},{content:c(()=>[B("div",Je,[u($,{type:"text",onClick:a[3]||(a[3]=b=>h("a"))},{default:c(()=>[z("填入账号A")]),_:1}),u($,{type:"text",onClick:a[4]||(a[4]=b=>h("b"))},{default:c(()=>[z("填入账号B")]),_:1}),u($,{type:"text",onClick:a[5]||(a[5]=b=>h("c"))},{default:c(()=>[z("填入账号C")]),_:1})])]),default:c(()=>[u($,{type:"link"},{default:c(()=>[z("填入账号")]),_:1})]),_:1})])]),_:1}),u(O,null,{default:c(()=>[u($,{size:"large",type:"primary",block:"",htmlType:"submit",loading:A(f)},{default:c(()=>[z("登录")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])])]),_:1})}}};export{ot as default};
